---
title: Vue d’ensemble du sous-système Windows pour Linux
description: Découvrez le sous-système Windows pour Linux, les différentes versions et les différentes façons de les utiliser.
keywords: BashOnWindows, bash, wsl, windows, windowssubsystem, gnu, linux, ubuntu, debian, suse, windows 10, changements de l’expérience utilisateur, WSL 2, noyau linux, applications réseau, localhost, IPv6, disque matériel virtuel, VHD, limitations VHD, erreur VHD
ms.date: 05/12/2020
ms.topic: article
ms.localizationpriority: high
ms.openlocfilehash: 299caaaeb1bac60d2af780dfdd10a64b218ab1f1
ms.sourcegitcommit: 1b6191351bbf9e95f3c28fc67abe4bf1bcfd3336
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/13/2020
ms.locfileid: "83270853"
---
# <a name="comparing-wsl-2-and-wsl-1"></a><span data-ttu-id="a78dd-104">Comparaison entre WSL 2 et WSL 1</span><span class="sxs-lookup"><span data-stu-id="a78dd-104">Comparing WSL 2 and WSL 1</span></span>

<span data-ttu-id="a78dd-105">Les principaux objectifs de la mise à jour du sous-système Windows pour Linux vers une nouvelle version sont d’**augmenter les performances du système de fichiers** et de prendre en charge la **compatibilité complète des appels système**.</span><span class="sxs-lookup"><span data-stu-id="a78dd-105">The primary goals of updating the Windows Subsystem for Linux to a new version are to **increase file system performance** and support **full system call compatibility**.</span></span> 

<span data-ttu-id="a78dd-106">WSL 2 utilise la technologie de virtualisation la plus récente et efficace pour exécuter un noyau Linux au sein d’une machine virtuelle utilitaire légère.</span><span class="sxs-lookup"><span data-stu-id="a78dd-106">WSL 2 uses the latest and greatest in virtualization technology to run a Linux kernel inside of a lightweight utility virtual machine (VM).</span></span> <span data-ttu-id="a78dd-107">Toutefois, WSL 2 n’est pas une expérience de machine virtuelle standard.</span><span class="sxs-lookup"><span data-stu-id="a78dd-107">However, WSL 2 is not a traditional VM experience.</span></span> <span data-ttu-id="a78dd-108">[En savoir plus sur l’architecture WSL 2](#wsl-2-architecture).</span><span class="sxs-lookup"><span data-stu-id="a78dd-108">[Learn more about the WSL 2 architecture](#wsl-2-architecture).</span></span>

## <a name="comparing-features"></a><span data-ttu-id="a78dd-109">Comparaison des fonctionnalités</span><span class="sxs-lookup"><span data-stu-id="a78dd-109">Comparing features</span></span>

<span data-ttu-id="a78dd-110">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="a78dd-110">Feature</span></span> | <span data-ttu-id="a78dd-111">WSL 1</span><span class="sxs-lookup"><span data-stu-id="a78dd-111">WSL 1</span></span> | <span data-ttu-id="a78dd-112">WSL 2</span><span class="sxs-lookup"><span data-stu-id="a78dd-112">WSL 2</span></span>
--- | --- | ---
 <span data-ttu-id="a78dd-113">Intégration entre Windows et Linux</span><span class="sxs-lookup"><span data-stu-id="a78dd-113">Integration between Windows and Linux</span></span>| ✅|✅
 <span data-ttu-id="a78dd-114">Temps de démarrage courts</span><span class="sxs-lookup"><span data-stu-id="a78dd-114">Fast boot times</span></span>| ✅ | ✅
 <span data-ttu-id="a78dd-115">Faible encombrement des ressources</span><span class="sxs-lookup"><span data-stu-id="a78dd-115">Small resource foot print</span></span>| ✅ |✅
 <span data-ttu-id="a78dd-116">Machine virtuelle managée</span><span class="sxs-lookup"><span data-stu-id="a78dd-116">Managed VM</span></span>| ❌ | ✅
 <span data-ttu-id="a78dd-117">Noyau Linux complet</span><span class="sxs-lookup"><span data-stu-id="a78dd-117">Full Linux Kernel</span></span>| ❌ |✅
 <span data-ttu-id="a78dd-118">Compatibilité complète des appels système</span><span class="sxs-lookup"><span data-stu-id="a78dd-118">Full system call compatibility</span></span>| ❌ | ✅
 <span data-ttu-id="a78dd-119">S’exécute avec VMware et VirtualBox</span><span class="sxs-lookup"><span data-stu-id="a78dd-119">Runs with VM Ware and VirtualBox</span></span>| ✅ |❌
 <span data-ttu-id="a78dd-120">Performances dans les systèmes de fichiers du système d’exploitation</span><span class="sxs-lookup"><span data-stu-id="a78dd-120">Performance across OS file systems</span></span>| ✅ | ❌

<span data-ttu-id="a78dd-121">Vous utilisez WSL 1 et souhaitez mettre à niveau vers WSL 2 ?</span><span class="sxs-lookup"><span data-stu-id="a78dd-121">Already using WSL 1 and want to upgrade to WSL 2?</span></span> <span data-ttu-id="a78dd-122">Suivez les instructions de [mise à jour vers WSL 2](./install-win10.md#update-to-wsl-2).</span><span class="sxs-lookup"><span data-stu-id="a78dd-122">Follow the instructions to [update to WSL 2](./install-win10.md#update-to-wsl-2)!</span></span>

<span data-ttu-id="a78dd-123">WSL 2 est disponible uniquement dans Windows 10, version 2004, build 19041 ou ultérieure.</span><span class="sxs-lookup"><span data-stu-id="a78dd-123">WSL 2 is only available in Windows 10, Version 2004, Build 19041 or higher.</span></span> <span data-ttu-id="a78dd-124">Vous devez [mettre à jour votre version de Windows](ms-settings:windowsupdate) et [rejoindre le programme Windows Insider](https://insider.windows.com/insidersigninboth/) sur l’anneau « Release Preview » jusqu’à la publication de la version publique fin mai.</span><span class="sxs-lookup"><span data-stu-id="a78dd-124">You will need to [update your Windows version](ms-settings:windowsupdate) and [join the Windows Insider program](https://insider.windows.com/insidersigninboth/) on the "Release Preview" ring until the public release in late May.</span></span>

## <a name="use-the-linux-file-system-for-faster-performance"></a><span data-ttu-id="a78dd-125">Utiliser le système de fichiers Linux pour des performances plus rapides</span><span class="sxs-lookup"><span data-stu-id="a78dd-125">Use the Linux file system for faster performance</span></span>

<span data-ttu-id="a78dd-126">Pour optimiser les performances, veillez à stocker vos fichiers de projet dans le système de fichiers Linux (et non dans le système de fichiers Windows).</span><span class="sxs-lookup"><span data-stu-id="a78dd-126">In order to optimize for the fastest performance speed, be sure to store your project files in the Linux file system (not the Windows file system).</span></span>

<span data-ttu-id="a78dd-127">Par exemple, lors du stockage de vos fichiers de projet WSL :</span><span class="sxs-lookup"><span data-stu-id="a78dd-127">For example, when storing your WSL project files:</span></span>

* <span data-ttu-id="a78dd-128">Utilisez le répertoire racine du système de fichiers Linux : `\\wsl$\Ubuntu-18.04\home\<user name>\Project`</span><span class="sxs-lookup"><span data-stu-id="a78dd-128">Use the Linux file system root directory: `\\wsl$\Ubuntu-18.04\home\<user name>\Project`</span></span>
* <span data-ttu-id="a78dd-129">Et non pas le répertoire racine du système de fichiers Windows : `C:\Users\<user name>\Project`</span><span class="sxs-lookup"><span data-stu-id="a78dd-129">Not the Windows file system root directory: `C:\Users\<user name>\Project`</span></span>

<span data-ttu-id="a78dd-130">Les fichiers de projet avec lesquels vous travaillez à l’aide d’une distribution WSL (comme Ubuntu) doivent se trouver dans le système de fichiers racine Linux pour tirer parti de l’accès plus rapide au système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="a78dd-130">Project files that you are working with using a WSL distribution (like Ubuntu) must be in the Linux root file system to take advantage of faster file system access.</span></span>

<span data-ttu-id="a78dd-131">Vous pouvez accéder à votre système de fichiers racine Linux à l’aide d’outils et d’applications Windows, tels que l’Explorateur de fichiers.</span><span class="sxs-lookup"><span data-stu-id="a78dd-131">You can access your Linux root file system with Windows apps and tools like File Explorer.</span></span> <span data-ttu-id="a78dd-132">Essayez d’ouvrir une distribution Linux (comme Ubuntu), assurez-vous d’être dans le répertoire racine de Linux en entrant la commande suivante : `cd ~`.</span><span class="sxs-lookup"><span data-stu-id="a78dd-132">Try opening a Linux distribution (like Ubuntu), be sure that you are in the Linux home directory by entering this command: `cd ~`.</span></span> <span data-ttu-id="a78dd-133">Ouvrez ensuite votre système de fichiers Linux dans l’Explorateur de fichiers en entrant *(n’oubliez pas le point final)*  : `explorer.exe .`</span><span class="sxs-lookup"><span data-stu-id="a78dd-133">Then open your Linux file system in File Explorer by entering *(don't forget the period at the end)*: `explorer.exe .`</span></span>

## <a name="exceptions-for-using-wsl-1-rather-than-wsl-2"></a><span data-ttu-id="a78dd-134">Exceptions pour l’utilisation de WSL 1 à la place de WSL 2</span><span class="sxs-lookup"><span data-stu-id="a78dd-134">Exceptions for using WSL 1 rather than WSL 2</span></span>

<span data-ttu-id="a78dd-135">Nous vous recommandons d’utiliser WSL 2 parce qu’il offre de meilleures performances et une compatibilité à 100 % des appels système.</span><span class="sxs-lookup"><span data-stu-id="a78dd-135">We recommend that you use WSL 2 as it offers faster performance and 100% system call compatibility.</span></span> <span data-ttu-id="a78dd-136">Toutefois, il existe quelques scénarios spécifiques où vous préférerez peut-être utiliser WSL 1.</span><span class="sxs-lookup"><span data-stu-id="a78dd-136">However, there are a few specific scenarios where you might prefer using WSL 1.</span></span> <span data-ttu-id="a78dd-137">Envisagez d’utiliser WSL 1 dans les cas suivants :</span><span class="sxs-lookup"><span data-stu-id="a78dd-137">Consider using WSL 1 if:</span></span>

* <span data-ttu-id="a78dd-138">Vos fichiers de projet doivent être stockés dans le système de fichiers Windows.</span><span class="sxs-lookup"><span data-stu-id="a78dd-138">Your project files must be stored in the Windows file system.</span></span>
  * <span data-ttu-id="a78dd-139">Si vous souhaitez utiliser votre distribution WSL Linux pour accéder aux fichiers de projet dans le système de fichiers Windows et que ces fichiers ne peuvent pas être stockés dans le système de fichiers Linux, vous obtiendrez de meilleures performances dans les systèmes de fichiers du système d’exploitation en utilisant WSL 1.</span><span class="sxs-lookup"><span data-stu-id="a78dd-139">If you will be using your WSL Linux distribution to access project files on the Windows file system, and these files cannot be stored on the Linux file system, you will achieve faster performance across the OS files systems by using WSL 1.</span></span>
* <span data-ttu-id="a78dd-140">Un projet qui requiert une compilation croisée avec des outils Windows et Linux sur les mêmes fichiers.</span><span class="sxs-lookup"><span data-stu-id="a78dd-140">A project which requires cross-compilation using both Windows and Linux tools on the same files.</span></span>
  * <span data-ttu-id="a78dd-141">Les performances des fichiers sur les systèmes d’exploitation Windows et Linux sont plus rapides dans WSL 1 que WSL 2. Par conséquent, si vous utilisez des applications Windows pour accéder à des fichiers Linux, vous obtiendrez actuellement de meilleures performances en termes de rapidité avec WSL 1.</span><span class="sxs-lookup"><span data-stu-id="a78dd-141">File performance across the Windows and Linux operating systems is faster in WSL 1 than WSL 2, so if you are using Windows applications to access Linux files, you will currently achieve faster performance with WSL 1.</span></span>

> [!NOTE]
> <span data-ttu-id="a78dd-142">Envisagez de tester l’[extension Remote WSL](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl) de VS Code pour pouvoir stocker vos fichiers de projet dans le système de fichiers Linux en utilisant les outils en ligne de commande Linux, mais également VS Code sur Windows pour créer, modifier, déboguer et exécuter votre projet dans un navigateur Internet sans les ralentissements de performances associés à l’utilisation des systèmes de fichiers Linux et Windows.</span><span class="sxs-lookup"><span data-stu-id="a78dd-142">Consider trying the VS Code [Remote WSL Extension](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl) to enable you to store your project files on the Linux file system, using Linux command line tools, but also using VS Code on Windows to author, edit, debug, or run your project in an internet browser without any of the performance slow-downs associated with working across the Linux and Windows file systems.</span></span> <span data-ttu-id="a78dd-143">[En savoir plus](https://code.visualstudio.com/docs/remote/wsl)</span><span class="sxs-lookup"><span data-stu-id="a78dd-143">[Learn more](https://code.visualstudio.com/docs/remote/wsl).</span></span>

## <a name="wsl-2-architecture"></a><span data-ttu-id="a78dd-144">Architecture WSL 2</span><span class="sxs-lookup"><span data-stu-id="a78dd-144">WSL 2 architecture</span></span>

<span data-ttu-id="a78dd-145">Une expérience de machine virtuelle traditionnelle peut être lente à démarrer, est isolée, consomme beaucoup de ressources et vous prend du temps pour la gérer.</span><span class="sxs-lookup"><span data-stu-id="a78dd-145">A traditional VM experience can be slow to boot up, is isolated, consumes lots of resources, and requires your time to manage it.</span></span> <span data-ttu-id="a78dd-146">WSL 2 n’a pas ces attributs,</span><span class="sxs-lookup"><span data-stu-id="a78dd-146">WSL 2 does not have these attributes.</span></span>

<span data-ttu-id="a78dd-147">WSL 2 offre les avantages de WSL 1, y compris une intégration transparente entre Windows et Linux, des temps de démarrage courts et un faible encombrement des ressources. De plus, il ne nécessite aucune configuration ni gestion de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="a78dd-147">WSL 2 provides the benefits of WSL 1, including seamless integration between Windows and Linux, fast boot times, a small resource footprint, and requires no VM configuration or management.</span></span> <span data-ttu-id="a78dd-148">WSL 2 utilise une machine virtuelle. Celle-ci est gérée et exécutée en arrière-plan, ce qui vous permet de jouir de la même expérience utilisateur qu’avec WSL 1.</span><span class="sxs-lookup"><span data-stu-id="a78dd-148">While WSL 2 does use a VM, it is managed and run behind the scenes, leaving you with the same user experience as WSL 1.</span></span>

### <a name="full-linux-kernel"></a><span data-ttu-id="a78dd-149">Noyau Linux complet</span><span class="sxs-lookup"><span data-stu-id="a78dd-149">Full Linux kernel</span></span>

<span data-ttu-id="a78dd-150">Le noyau Linux dans WSL 2 est élaboré par Microsoft à partir de la dernière branche stable, en fonction de la source disponible sur kernel.org. Ce noyau a été spécialement réglé pour WSL 2, afin d’optimiser la taille et les performances pour offrir une expérience Linux exceptionnelle sur Windows.</span><span class="sxs-lookup"><span data-stu-id="a78dd-150">The Linux kernel in WSL 2 is built by Microsoft from the latest stable branch, based on the source available at kernel.org. This kernel has been specially tuned for WSL 2, optimizing for size and performance to provide an amazing Linux experience on Windows.</span></span> <span data-ttu-id="a78dd-151">Le noyau sera géré par le biais des mises à jour Windows, ce qui signifie que vous obtiendrez les derniers correctifs de sécurité et les dernières améliorations du noyau sans avoir à gérer cela vous-même.</span><span class="sxs-lookup"><span data-stu-id="a78dd-151">The kernel will be serviced by Windows updates, which means you will get the latest security fixes and kernel improvements without needing to manage it yourself.</span></span>

<span data-ttu-id="a78dd-152">Le [noyau Linux WSL 2 est disponible en open source](https://github.com/microsoft/WSL2-Linux-Kernel).</span><span class="sxs-lookup"><span data-stu-id="a78dd-152">The [WSL 2 Linux kernel is open source](https://github.com/microsoft/WSL2-Linux-Kernel).</span></span> <span data-ttu-id="a78dd-153">Si vous souhaitez en savoir plus, consultez le billet de blog [Shipping a Linux Kernel with Windows](https://devblogs.microsoft.com/commandline/shipping-a-linux-kernel-with-windows/) rédigé par l’équipe qui l’a créé.</span><span class="sxs-lookup"><span data-stu-id="a78dd-153">If you'd like to learn more, check out the blog post [Shipping a Linux Kernel with Windows](https://devblogs.microsoft.com/commandline/shipping-a-linux-kernel-with-windows/) written by the team that built it.</span></span>

### <a name="increased-file-io-performance"></a><span data-ttu-id="a78dd-154">Amélioration des performances d’E/S de fichier</span><span class="sxs-lookup"><span data-stu-id="a78dd-154">Increased file IO performance</span></span>

<span data-ttu-id="a78dd-155">Les opérations gourmandes en fichiers, telles que git clone, npm install, apt update, apt upgrade, etc., sont toutes nettement plus rapides avec WSL 2.</span><span class="sxs-lookup"><span data-stu-id="a78dd-155">File intensive operations like git clone, npm install, apt update, apt upgrade, and more are all be noticeably faster with WSL 2.</span></span>

<span data-ttu-id="a78dd-156">L’augmentation de la vitesse réelle dépend de l’application que vous exécutez et de la manière dont elle interagit avec le système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="a78dd-156">The actual speed increase will depend on which app you're running and how it is interacting with the file system.</span></span> <span data-ttu-id="a78dd-157">Les versions initiales de WSL 2 s’exécutent jusqu’à 20 fois plus vite que WSL 1 lors de la décompression d’un tarball compressé, et environ 2 à 5 fois plus vite lors de l’utilisation de git clone, npm install et cmake sur divers projets.</span><span class="sxs-lookup"><span data-stu-id="a78dd-157">Initial versions of WSL 2 run up to 20x faster compared to WSL 1 when unpacking a zipped tarball, and around 2-5x faster when using git clone, npm install and cmake on various projects.</span></span>

### <a name="full-system-call-compatibility"></a><span data-ttu-id="a78dd-158">Compatibilité complète des appels système</span><span class="sxs-lookup"><span data-stu-id="a78dd-158">Full system call compatibility</span></span>

<span data-ttu-id="a78dd-159">Les binaires Linux utilisent des appels système pour exécuter des fonctions, telles que l’accès aux fichiers, la demande de mémoire, la création de processus et bien plus encore.</span><span class="sxs-lookup"><span data-stu-id="a78dd-159">Linux binaries use system calls to perform functions such as accessing files, requesting memory, creating processes, and more.</span></span> <span data-ttu-id="a78dd-160">Alors que WSL 1 utilisait une couche de traduction créée par l’équipe WSL, WSL 2 inclut son propre noyau Linux avec compatibilité complète des appels système.</span><span class="sxs-lookup"><span data-stu-id="a78dd-160">Whereas WSL 1 used a translation layer that was built by the WSL team, WSL 2 includes its own Linux kernel with full system call compatibility.</span></span> <span data-ttu-id="a78dd-161">Les avantages sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="a78dd-161">Benefits include:</span></span>

* <span data-ttu-id="a78dd-162">Un tout nouvel ensemble d’applications que vous pouvez exécuter au sein de WSL, telles que **[Docker](https://code.visualstudio.com/blogs/2020/03/02/docker-in-wsl2)** et plus encore.</span><span class="sxs-lookup"><span data-stu-id="a78dd-162">A whole new set of apps that you can run inside of WSL, such as **[Docker](https://code.visualstudio.com/blogs/2020/03/02/docker-in-wsl2)** and more.</span></span>

* <span data-ttu-id="a78dd-163">Les mises à jour du noyau Linux sont toutes immédiatement prêtes à l’emploi.</span><span class="sxs-lookup"><span data-stu-id="a78dd-163">Any updates to the Linux kernel are immediately ready for use.</span></span> <span data-ttu-id="a78dd-164">(Vous n’avez pas besoin d’attendre que l’équipe WSL implémente les mises à jour et ajoute les modifications).</span><span class="sxs-lookup"><span data-stu-id="a78dd-164">(You don't have to wait for the WSL team to implement updates and add the changes).</span></span>

### <a name="wsl-2-uses-a-smaller-amount-of-memory-on-startup"></a><span data-ttu-id="a78dd-165">WSL 2 utilise une plus petite quantité de mémoire au démarrage.</span><span class="sxs-lookup"><span data-stu-id="a78dd-165">WSL 2 uses a smaller amount of memory on startup</span></span>

<span data-ttu-id="a78dd-166">WSL 2 utilise une machine virtuelle utilitaire légère sur un noyau Linux réel avec un faible encombrement mémoire.</span><span class="sxs-lookup"><span data-stu-id="a78dd-166">WSL 2 uses a lightweight utility VM on a real Linux kernel with a small memory footprint.</span></span> <span data-ttu-id="a78dd-167">L’utilitaire alloue la mémoire stockée à l’adresse virtuelle au démarrage.</span><span class="sxs-lookup"><span data-stu-id="a78dd-167">The utility will allocate Virtual Address backed memory on startup.</span></span> <span data-ttu-id="a78dd-168">Il est configuré pour démarrer avec une plus petite proportion de votre mémoire totale que celle requise pour WSL 1.</span><span class="sxs-lookup"><span data-stu-id="a78dd-168">It is configured to start with a smaller proportion of your total memory that what was required for WSL 1.</span></span>

## <a name="accessing-network-applications"></a><span data-ttu-id="a78dd-169">Accès aux applications réseau</span><span class="sxs-lookup"><span data-stu-id="a78dd-169">Accessing network applications</span></span>

### <a name="accessing-linux-networking-apps-from-windows-localhost"></a><span data-ttu-id="a78dd-170">Accès aux applications réseau Linux à partir de Windows (localhost)</span><span class="sxs-lookup"><span data-stu-id="a78dd-170">Accessing Linux networking apps from Windows (localhost)</span></span>

<span data-ttu-id="a78dd-171">Si vous créez une application réseau (par exemple, une application qui s’exécute sur un serveur SQL ou NodeJS) dans votre distribution Linux, vous pouvez y accéder à partir d’une application Windows (comme votre navigateur Internet Edge ou Chrome) à l’aide de `localhost` (comme vous le feriez normalement).</span><span class="sxs-lookup"><span data-stu-id="a78dd-171">If you are building a networking app (for example an app running on a NodeJS or SQL server) in your Linux distribution, you can access it from a Windows app (like your Edge or Chrome internet browser) using `localhost` (just like you normally would).</span></span>

<span data-ttu-id="a78dd-172">Toutefois, si vous exécutez une version antérieure de Windows (build 18945 ou inférieure), vous devez récupérer l’adresse IP de la machine virtuelle hôte Linux (ou effectuer une [mise à jour vers la dernière version de Windows](ms-settings:windowsupdate)).</span><span class="sxs-lookup"><span data-stu-id="a78dd-172">However, if you are running an older version of Windows (Build 18945 or less), you will need to get the IP address of the Linux host VM (or [update to the latest Windows version](ms-settings:windowsupdate)).</span></span>

<span data-ttu-id="a78dd-173">Pour trouver l’adresse IP de la machine virtuelle qui alimente votre distribution Linux :</span><span class="sxs-lookup"><span data-stu-id="a78dd-173">To find the IP address of the virtual machine powering your Linux distribution:</span></span>

* <span data-ttu-id="a78dd-174">À partir de votre distribution WSL (p. ex. Ubuntu), exécutez la commande : `ip addr`</span><span class="sxs-lookup"><span data-stu-id="a78dd-174">From your WSL distribution (ie Ubuntu), run the command: `ip addr`</span></span>
* <span data-ttu-id="a78dd-175">Recherchez et copiez l’adresse sous la valeur `inet` de l’interface `eth0`.</span><span class="sxs-lookup"><span data-stu-id="a78dd-175">Find and copy the address under the `inet` value of the `eth0` interface.</span></span>
* <span data-ttu-id="a78dd-176">Si vous avez installé l’outil grep, trouvez-la plus facilement en filtrant la sortie à l’aide de la commande : `ip addr | grep eth0`</span><span class="sxs-lookup"><span data-stu-id="a78dd-176">If you have the grep tool installed, find this more easily by filtering the output with the command: `ip addr | grep eth0`</span></span>
* <span data-ttu-id="a78dd-177">Connectez-vous à votre serveur Linux à l’aide de cette adresse IP.</span><span class="sxs-lookup"><span data-stu-id="a78dd-177">Connect to your Linux server using this IP address.</span></span>

<span data-ttu-id="a78dd-178">L’image ci-dessous illustre un exemple de cela avec la connexion à un serveur Node.js à l’aide du navigateur Edge.</span><span class="sxs-lookup"><span data-stu-id="a78dd-178">The picture below shows an example of this by connecting to a Node.js server using the Edge browser.</span></span>

![Accès aux applications réseau Linux à partir de Windows](media/wsl2-network-w2l.jpg)

### <a name="accessing-windows-networking-apps-from-linux-host-ip"></a><span data-ttu-id="a78dd-180">Accès aux applications réseau Windows à partir de Linux (adresse IP de l’hôte)</span><span class="sxs-lookup"><span data-stu-id="a78dd-180">Accessing Windows networking apps from Linux (host IP)</span></span>

<span data-ttu-id="a78dd-181">Si vous souhaitez accéder à une application réseau qui s’exécute sur Windows (par exemple, une application s’exécutant sur un serveur SQL ou NodeJS) à partir de votre distribution Linux (p. ex. Ubuntu), vous devez utiliser l’adresse IP de votre ordinateur hôte.</span><span class="sxs-lookup"><span data-stu-id="a78dd-181">If you want to access a networking app running on Windows (for example an app running on a NodeJS or SQL server) from your Linux distribution (ie Ubuntu), then you need to use the IP address of your host machine.</span></span> <span data-ttu-id="a78dd-182">Il ne s’agit pas d’un scénario courant, mais vous pouvez suivre ces étapes pour le faire fonctionner.</span><span class="sxs-lookup"><span data-stu-id="a78dd-182">While this is not a common scenario, you can follow these steps to make it work.</span></span>
    - <span data-ttu-id="a78dd-183">Obtenez l’adresse IP de votre ordinateur hôte en exécutant cette commande à partir de votre distribution Linux : `cat /etc/resolv.conf`</span><span class="sxs-lookup"><span data-stu-id="a78dd-183">Obtain the IP address of your host machine by running this command from your Linux distribution: `cat /etc/resolv.conf`</span></span>
    - <span data-ttu-id="a78dd-184">Copiez l’adresse IP qui suit le terme : `nameserver`.</span><span class="sxs-lookup"><span data-stu-id="a78dd-184">Copy the IP address following the term: `nameserver`.</span></span>
    - <span data-ttu-id="a78dd-185">Connectez-vous à n’importe quel serveur Windows à l’aide de l’adresse IP copiée.</span><span class="sxs-lookup"><span data-stu-id="a78dd-185">Connect to any Windows server using the copied IP address.</span></span>

<span data-ttu-id="a78dd-186">L’image ci-dessous présente un exemple de cela avec la connexion à un serveur Node.js en cours d’exécution dans Windows via curl.</span><span class="sxs-lookup"><span data-stu-id="a78dd-186">The picture below shows an example of this by connecting to a Node.js server running in Windows via curl.</span></span>

![Accès aux applications réseau Linux à partir de Windows](media/wsl2-network-l2w.png)

### <a name="additional-networking-considerations"></a><span data-ttu-id="a78dd-188">Autres considérations relatives aux réseaux</span><span class="sxs-lookup"><span data-stu-id="a78dd-188">Additional networking considerations</span></span>

#### <a name="connecting-via-remote-ip-addresses"></a><span data-ttu-id="a78dd-189">Connexion via des adresses IP distantes</span><span class="sxs-lookup"><span data-stu-id="a78dd-189">Connecting via remote IP addresses</span></span>

<span data-ttu-id="a78dd-190">Lorsque vous utilisez des adresses IP distantes pour vous connecter à vos applications, celles-ci sont traitées comme des connexions à partir du réseau local (LAN).</span><span class="sxs-lookup"><span data-stu-id="a78dd-190">When using remote IP addresses to connect to your applications, they will be treated as connections from the Local Area Network (LAN).</span></span> <span data-ttu-id="a78dd-191">Cela signifie que vous devez vous assurer que votre application peut accepter les connexions LAN.</span><span class="sxs-lookup"><span data-stu-id="a78dd-191">This means that you will need to make sure your application can accept LAN connections.</span></span>

<span data-ttu-id="a78dd-192">Par exemple, vous devrez peut-être lier votre application à `0.0.0.0` au lieu de `127.0.0.1`.</span><span class="sxs-lookup"><span data-stu-id="a78dd-192">For example, you may need to bind your application to `0.0.0.0` instead of `127.0.0.1`.</span></span> <span data-ttu-id="a78dd-193">Dans l’exemple d’une application Python utilisant Flask, vous pouvez procéder à l’aide de la commande : `app.run(host='0.0.0.0')`.</span><span class="sxs-lookup"><span data-stu-id="a78dd-193">In the example of a Python app using Flask, this can be done with the command: `app.run(host='0.0.0.0')`.</span></span> <span data-ttu-id="a78dd-194">Gardez à l’esprit la sécurité lorsque vous apportez ces changements, car cela permettra d’établir des connexions à partir de votre réseau local.</span><span class="sxs-lookup"><span data-stu-id="a78dd-194">Please keep security in mind when making these changes as this will allow connections from your LAN.</span></span>

#### <a name="accessing-a-wsl-2-distribution-from-your-local-area-network-lan"></a><span data-ttu-id="a78dd-195">Accès à une distribution WSL 2 à partir de votre réseau local (LAN)</span><span class="sxs-lookup"><span data-stu-id="a78dd-195">Accessing a WSL 2 distribution from your local area network (LAN)</span></span>

<span data-ttu-id="a78dd-196">Lorsque vous utilisez une distribution WSL 1, si votre ordinateur était configuré pour être accessible via votre réseau local, les applications qui s’exécutent dans WSL sont également accessibles sur votre réseau local.</span><span class="sxs-lookup"><span data-stu-id="a78dd-196">When using a WSL 1 distribution, if your computer was set up to be accessed by your LAN, then applications run in WSL could be accessed on your LAN as well.</span></span>

<span data-ttu-id="a78dd-197">Ce n’est pas le cas par défaut dans WSL 2.</span><span class="sxs-lookup"><span data-stu-id="a78dd-197">This isn't the default case in WSL 2.</span></span> <span data-ttu-id="a78dd-198">WSL 2 a une carte Ethernet virtualisée avec sa propre adresse IP unique.</span><span class="sxs-lookup"><span data-stu-id="a78dd-198">WSL 2 has a virtualized ethernet adapter with its own unique IP address.</span></span> <span data-ttu-id="a78dd-199">Actuellement, pour activer ce flux de travail, vous devez suivre les mêmes étapes que pour une machine virtuelle standard.</span><span class="sxs-lookup"><span data-stu-id="a78dd-199">Currently, to enable this workflow you will need to go through the same steps as you would for a regular virtual machine.</span></span> <span data-ttu-id="a78dd-200">(Nous recherchons des moyens d’améliorer cette expérience.)</span><span class="sxs-lookup"><span data-stu-id="a78dd-200">(We are looking into ways to improve this experience.)</span></span>

#### <a name="ipv6-access"></a><span data-ttu-id="a78dd-201">Accès IPv6</span><span class="sxs-lookup"><span data-stu-id="a78dd-201">IPv6 access</span></span>

<span data-ttu-id="a78dd-202">Les distributions WSL 2 ne peuvent actuellement pas atteindre les adresses IPv6 uniquement.</span><span class="sxs-lookup"><span data-stu-id="a78dd-202">WSL 2 distributions currently cannot reach IPv6-only addresses.</span></span> <span data-ttu-id="a78dd-203">Nous travaillons à l’ajout de cette fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="a78dd-203">We are working on adding this feature.</span></span>

## <a name="expanding-the-size-of-your-wsl-2-virtual-hardware-disk"></a><span data-ttu-id="a78dd-204">Augmentation de la taille de votre disque matériel virtuel WSL 2</span><span class="sxs-lookup"><span data-stu-id="a78dd-204">Expanding the size of your WSL 2 Virtual Hardware Disk</span></span>

<span data-ttu-id="a78dd-205">WSL 2 utilise un disque dur virtuel (VHD) pour stocker vos fichiers Linux.</span><span class="sxs-lookup"><span data-stu-id="a78dd-205">WSL 2 uses a Virtual Hardware Disk (VHD) to store your Linux files.</span></span> <span data-ttu-id="a78dd-206">Si vous atteignez sa taille maximale, vous devrez peut-être l’augmenter.</span><span class="sxs-lookup"><span data-stu-id="a78dd-206">If you reach its max size you may need to expand it.</span></span>

<span data-ttu-id="a78dd-207">Le disque dur virtuel WSL 2 utilise le système de fichiers ext4.</span><span class="sxs-lookup"><span data-stu-id="a78dd-207">The WSL 2 VHD uses the ext4 file system.</span></span> <span data-ttu-id="a78dd-208">Ce disque dur virtuel est redimensionné automatiquement en fonction de vos besoins de stockage et a une taille maximale initiale de 256 Go.</span><span class="sxs-lookup"><span data-stu-id="a78dd-208">This VHD automatically resizes to meet your storage needs and has an initial maximum size of 256GB.</span></span> <span data-ttu-id="a78dd-209">Si la taille de votre distribution vient à dépasser 256 Go, vous verrez des erreurs indiquant que l’espace disque est insuffisant.</span><span class="sxs-lookup"><span data-stu-id="a78dd-209">If your distribution grows in size to be greater than 256GB, you will see errors stating that you've run out of disk space.</span></span> <span data-ttu-id="a78dd-210">Vous pouvez corriger cette erreur en augmentant la taille du disque dur virtuel.</span><span class="sxs-lookup"><span data-stu-id="a78dd-210">You can fix this error by expanding the VHD size.</span></span>

<span data-ttu-id="a78dd-211">Pour augmenter la taille maximale du disque dur virtuel au-delà de 256 Go :</span><span class="sxs-lookup"><span data-stu-id="a78dd-211">To expand your maximum VHD size beyond 256GB:</span></span>

1. <span data-ttu-id="a78dd-212">Arrêtez toutes les instances WSL à l’aide de la commande : `wsl --shutdown`</span><span class="sxs-lookup"><span data-stu-id="a78dd-212">Terminate all WSL instances using the command: `wsl --shutdown`</span></span>

2. <span data-ttu-id="a78dd-213">Recherchez le nom du package d’installation de votre distribution ('PackageFamilyName')</span><span class="sxs-lookup"><span data-stu-id="a78dd-213">Find your distribution installation package name ('PackageFamilyName')</span></span>
    * <span data-ttu-id="a78dd-214">Dans PowerShell ('distro' étant le nom de votre distribution), entrez la commande :</span><span class="sxs-lookup"><span data-stu-id="a78dd-214">Using PowerShell (where 'distro' is your distribution name) enter the command:</span></span>
    * `Get-AppxPackage -Name "*<distro>*" | Select PackageFamilyName`

3. <span data-ttu-id="a78dd-215">Localisez le paramètre `fullpath` du fichier sur le disque dur virtuel, utilisé par votre installation WSL 2. Il s’agit de votre `pathToVHD` :</span><span class="sxs-lookup"><span data-stu-id="a78dd-215">Locate the VHD file `fullpath` used by your WSL 2 installation, this will be your `pathToVHD`:</span></span>
     * `%LOCALAPPDATA%\Packages\<PackageFamilyName>\LocalState\<disk>.vhdx`

4. <span data-ttu-id="a78dd-216">Redimensionnez votre disque dur virtuel WSL 2 en exécutant les commandes suivantes :</span><span class="sxs-lookup"><span data-stu-id="a78dd-216">Resize your WSL 2 VHD by completing the following commands:</span></span>
   * <span data-ttu-id="a78dd-217">Ouvrez l’invite de commandes Windows avec des privilèges d’administrateur et entrez :</span><span class="sxs-lookup"><span data-stu-id="a78dd-217">Open Windows Command Prompt with admin privileges and enter:</span></span>
      * `diskpart`
      * `Select vdisk file="<pathToVHD>"`
      * `expand vdisk maximum="<sizeInMegaBytes>"`

5. <span data-ttu-id="a78dd-218">Lancez votre distribution WSL (Ubuntu, par exemple).</span><span class="sxs-lookup"><span data-stu-id="a78dd-218">Launch your WSL distribution (Ubuntu, for example).</span></span>

6. <span data-ttu-id="a78dd-219">Indiquez à WSL qu’il peut augmenter la taille de son système de fichiers en exécutant les commandes suivantes à partir de votre ligne de commande de distribution Linux :</span><span class="sxs-lookup"><span data-stu-id="a78dd-219">Make WSL aware that it can expand its file system's size by running these commands from your Linux distribution command line:</span></span>
    * `sudo mount -t devtmpfs none /dev`
    * `mount | grep ext4`
    * <span data-ttu-id="a78dd-220">Copiez le nom de cette entrée, qui ressemble à ceci : `/dev/sdXX` (X représentant tout autre caractère)</span><span class="sxs-lookup"><span data-stu-id="a78dd-220">Copy the name of this entry, which will look like: `/dev/sdXX` (with the X representing any other character)</span></span>
    * `sudo resize2fs /dev/sdXX`
    * <span data-ttu-id="a78dd-221">Utilisez la valeur que vous avez copiée précédemment.</span><span class="sxs-lookup"><span data-stu-id="a78dd-221">Use the value you copied earlier.</span></span> <span data-ttu-id="a78dd-222">Vous devrez peut-être également installer resize2fs : `apt install resize2fs`</span><span class="sxs-lookup"><span data-stu-id="a78dd-222">You may also need to install resize2fs: `apt install resize2fs`</span></span>

> [!NOTE]
> <span data-ttu-id="a78dd-223">En général, vous ne devez pas modifier, déplacer ni accéder aux fichiers associés à WSL, situés dans votre dossier AppData, à l’aide d’outils ou d’éditeurs Windows.</span><span class="sxs-lookup"><span data-stu-id="a78dd-223">In general do not modify, move, or access the WSL related files located inside of your AppData folder using Windows tools or editors.</span></span> <span data-ttu-id="a78dd-224">Cela pourrait entraîner la corruption de votre distribution Linux.</span><span class="sxs-lookup"><span data-stu-id="a78dd-224">Doing so could cause your Linux distribution to become corrupted.</span></span>
