---
title: Changements de l’expérience utilisateur entre WSL 1 et WSL 2
description: Changements de l’expérience utilisateur entre WSL 1 et WSL 2
keywords: BashOnWindows, bash, wsl, wsl2, windows, sous-système windows pour linux, sous-système windows, ubuntu, debian, suse, windows 10
ms.date: 05/30/2019
ms.topic: article
ms.assetid: 7afaeacf-435a-4e58-bff0-a9f0d75b8a51
ms.custom: seodec18
ms.localizationpriority: high
ms.openlocfilehash: 1965a22a2e290777b207d9ded099ce4a79e1ed38
ms.sourcegitcommit: 39d3a2f0f4184eaec8d8fec740aff800e8ea9ac7
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/24/2020
ms.locfileid: "80256332"
---
# <a name="user-experience-changes-between-wsl-1-and-wsl-2"></a><span data-ttu-id="d0a46-104">Changements de l’expérience utilisateur entre WSL 1 et WSL 2</span><span class="sxs-lookup"><span data-stu-id="d0a46-104">User Experience Changes Between WSL 1 and WSL 2</span></span>

<span data-ttu-id="d0a46-105">Cette page présente les différences d’expérience utilisateur entre WSL 1 et la préversion de WSL 2.</span><span class="sxs-lookup"><span data-stu-id="d0a46-105">This page goes over the user experience differences between WSL 1 and the WSL 2 preview.</span></span> <span data-ttu-id="d0a46-106">Les changements clés à prendre en compte sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="d0a46-106">The key changes to be aware of are:</span></span>

- <span data-ttu-id="d0a46-107">Placez les fichiers auxquels vos applications Linux accéderont dans votre système de fichiers racine Linux pour accélérer l’accès et améliorer les performances de fichier</span><span class="sxs-lookup"><span data-stu-id="d0a46-107">Place files that your Linux apps will access in your Linux root file system for faster file performance speed</span></span>
- <span data-ttu-id="d0a46-108">Dans les versions initiales de la préversion de WSL 2, vous devez accéder aux applications réseau à l’aide d’une adresse IP et sans utiliser localhost</span><span class="sxs-lookup"><span data-stu-id="d0a46-108">In initial builds of the WSL 2 preview you will need to access network applications using an IP address and not using localhost</span></span>

<span data-ttu-id="d0a46-109">Vous trouverez ci-dessous la liste complète des autres changements que vous remarquerez peut-être :</span><span class="sxs-lookup"><span data-stu-id="d0a46-109">And below is the full list of other changes that you may notice:</span></span>

- <span data-ttu-id="d0a46-110">WSL 2 utilise un [disque dur virtuel](https://en.wikipedia.org/wiki/VHD_(file_format)) (VHD) pour stocker vos fichiers et, si vous atteignez sa taille maximale, vous devrez peut-être le développer</span><span class="sxs-lookup"><span data-stu-id="d0a46-110">WSL 2 uses a [Virtual Hardware Disk](https://en.wikipedia.org/wiki/VHD_(file_format)) (VHD) to store your files and if you reach its max size you may need to expand it</span></span>
- <span data-ttu-id="d0a46-111">Au démarrage, WSL 2 utilise à présent une petite proportion de mémoire</span><span class="sxs-lookup"><span data-stu-id="d0a46-111">When starting, WSL 2 will now use a small proportion of memory</span></span>
- <span data-ttu-id="d0a46-112">La vitesse d’accès aux fichiers du système d’exploitation est plus lente dans les versions d’évaluation initiales</span><span class="sxs-lookup"><span data-stu-id="d0a46-112">Cross OS file access speed will be slower in initial preview builds</span></span>

## <a name="place-your-linux-files-in-your-linux-root-file-system"></a><span data-ttu-id="d0a46-113">Placer les fichiers Linux dans votre système de fichiers racine Linux</span><span class="sxs-lookup"><span data-stu-id="d0a46-113">Place your Linux files in your Linux root file system</span></span>
<span data-ttu-id="d0a46-114">Veillez à placer les fichiers auxquels vous accéderez fréquemment avec les applications Linux au sein de votre système de fichiers racine Linux pour bénéficier des avantages en matière de performances de fichier.</span><span class="sxs-lookup"><span data-stu-id="d0a46-114">Make sure to put the files that you will be accessing frequently with Linux applications inside of your Linux root file system to enjoy the file performance benefits.</span></span> <span data-ttu-id="d0a46-115">Ces fichiers doivent se trouver dans le système de fichiers racine Linux pour bénéficier d’un accès plus rapide au système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="d0a46-115">These files have to be inside of the Linux root file system to have faster file system access.</span></span> <span data-ttu-id="d0a46-116">Nous avons également permis aux applications Windows d’accéder au système de fichiers racine Linux (comme l’Explorateur de fichiers ;</span><span class="sxs-lookup"><span data-stu-id="d0a46-116">We have also made it possible for Windows apps to access the Linux root file system (like File Explorer!</span></span> <span data-ttu-id="d0a46-117">essayez d’exécuter : `explorer.exe .` dans le répertoire de démarrage de votre distribution Linux et observez ce qui se passe), ce qui facilite grandement cette transition.</span><span class="sxs-lookup"><span data-stu-id="d0a46-117">Try running: `explorer.exe .` in the home directory of your Linux distro and see what happens) which will make this transition significantly easier.</span></span> 

## <a name="accessing-network-applications"></a><span data-ttu-id="d0a46-118">Accès aux applications réseau</span><span class="sxs-lookup"><span data-stu-id="d0a46-118">Accessing network applications</span></span>
<span data-ttu-id="d0a46-119">Dans les versions initiales de la préversion de WSL 2, vous devrez accéder à n’importe quel serveur Windows à partir de Linux à l’aide de l’adresse IP de votre ordinateur hôte.</span><span class="sxs-lookup"><span data-stu-id="d0a46-119">In the initial builds of the WSL 2 preview, you will need to access any Windows server from Linux using the IP address of your host machine.</span></span>

### <a name="accessing-windows-applications-from-linux"></a><span data-ttu-id="d0a46-120">Accès aux applications Windows à partir de Linux</span><span class="sxs-lookup"><span data-stu-id="d0a46-120">Accessing Windows applications from Linux</span></span>
<span data-ttu-id="d0a46-121">Pour accéder à une application réseau Windows, vous devez utiliser l’adresse IP de votre ordinateur hôte.</span><span class="sxs-lookup"><span data-stu-id="d0a46-121">To access a Windows network application you'll need to use the IP address of your host machine.</span></span> <span data-ttu-id="d0a46-122">Pour ce faire, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="d0a46-122">You can do so with these steps:</span></span>

- <span data-ttu-id="d0a46-123">Obtenez l’adresse IP de votre ordinateur hôte en exécutant la commande `cat /etc/resolv.conf` et en copiant l’adresse IP suivant le terme `nameserver`.</span><span class="sxs-lookup"><span data-stu-id="d0a46-123">Obtain the IP address of your host machine by running the command `cat /etc/resolv.conf` and copying the IP address following the term `nameserver`.</span></span> 
- <span data-ttu-id="d0a46-124">Connectez-vous à n’importe quel serveur Windows à l’aide de l’adresse IP copiée.</span><span class="sxs-lookup"><span data-stu-id="d0a46-124">Connect to any Windows server using the copied IP address.</span></span>

<span data-ttu-id="d0a46-125">L’image ci-dessous présente un exemple de cela avec la connexion à un serveur Node.js en cours d’exécution dans Windows via curl.</span><span class="sxs-lookup"><span data-stu-id="d0a46-125">The picture below shows an example of this by connecting to a Node.js server running in Windows via curl.</span></span> 

![Accès aux applications réseau Linux à partir de Windows](media/wsl2-network-l2w.png)

### <a name="accessing-linux-applications-from-windows"></a><span data-ttu-id="d0a46-127">Accès aux applications Linux à partir de Windows</span><span class="sxs-lookup"><span data-stu-id="d0a46-127">Accessing Linux applications from Windows</span></span>

<span data-ttu-id="d0a46-128">Selon la version de Windows que vous utilisez, vous devrez peut-être récupérer l’adresse IP de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="d0a46-128">Depending on which version of Windows you're using, you might need to retrieve the IP address of the virtual machine.</span></span> <span data-ttu-id="d0a46-129">Si vous disposez de la build 18945 ou ultérieure, vous pouvez utiliser `localhost` de façon normale.</span><span class="sxs-lookup"><span data-stu-id="d0a46-129">If your build is 18945 or higher, you can use `localhost` just like normal.</span></span> 

#### <a name="accessing-linux-on-builds-lower-than-18945"></a><span data-ttu-id="d0a46-130">Accès à Linux sur des builds antérieures à la build [18945](https://blogs.windows.com/windowsexperience/2019/07/26/announcing-windows-10-insider-preview-build-18945/)</span><span class="sxs-lookup"><span data-stu-id="d0a46-130">Accessing Linux on Builds lower than [18945](https://blogs.windows.com/windowsexperience/2019/07/26/announcing-windows-10-insider-preview-build-18945/)</span></span>

<span data-ttu-id="d0a46-131">Si vous avez un serveur dans une distribution WSL, vous devez trouver l’adresse IP de la machine virtuelle qui alimente votre distribution et vous y connecter avec cette adresse IP.</span><span class="sxs-lookup"><span data-stu-id="d0a46-131">If you have a server in a WSL distro, you'll need to find the IP address of the virtual machine powering your distro and connect to it with that IP address.</span></span> <span data-ttu-id="d0a46-132">Pour ce faire, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="d0a46-132">You can do that by following these steps:</span></span>

- <span data-ttu-id="d0a46-133">Obtenez l’adresse IP de votre distribution en exécutant la commande `ip addr` à l’intérieur de votre distribution WSL et en la recherchant sous la valeur `inet` de l’interface `eth0`.</span><span class="sxs-lookup"><span data-stu-id="d0a46-133">Obtain the IP address of your distro by running the command `ip addr` inside of your WSL distro and finding it under the `inet` value of the `eth0` interface.</span></span>
   - <span data-ttu-id="d0a46-134">Vous pouvez la trouver plus facilement en filtrant la sortie de la commande à l’aide de grep comme suit : `ip addr | grep eth0`.</span><span class="sxs-lookup"><span data-stu-id="d0a46-134">You can find this more easily by filtering the output of the command using grep like so: `ip addr | grep eth0`.</span></span>
- <span data-ttu-id="d0a46-135">Connectez-vous à votre serveur Linux à l’aide de l’adresse IP que vous avez trouvée ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="d0a46-135">Connect to your Linux server using the IP you found above.</span></span>

<span data-ttu-id="d0a46-136">L’image ci-dessous illustre un exemple de cela avec la connexion à un serveur Node.js à l’aide du navigateur Edge.</span><span class="sxs-lookup"><span data-stu-id="d0a46-136">The picture below shows an example of this by connecting to a Node.js server using the Edge browser.</span></span>

![Accès aux applications réseau Linux à partir de Windows](media/wsl2-network-w2l.jpg)

### <a name="other-networking-considerations"></a><span data-ttu-id="d0a46-138">Autres considérations relatives aux réseaux</span><span class="sxs-lookup"><span data-stu-id="d0a46-138">Other networking considerations</span></span>

#### <a name="connecting-via-remote-ip-addresses"></a><span data-ttu-id="d0a46-139">Connexion via des adresses IP distantes</span><span class="sxs-lookup"><span data-stu-id="d0a46-139">Connecting via remote IP addresses</span></span>

<span data-ttu-id="d0a46-140">Lorsque vous utilisez des adresses IP distantes pour vous connecter à vos applications, celles-ci sont traitées comme des connexions à partir du réseau local (LAN).</span><span class="sxs-lookup"><span data-stu-id="d0a46-140">When using remote IP addresses to connect to your applications, they will be treated as connections from the Local Area Network (LAN).</span></span> <span data-ttu-id="d0a46-141">Cela signifie que vous devez vous assurer que votre application peut accepter des connexions LAN, par exemple : Vous devrez peut-être lier votre application à `0.0.0.0` au lieu de `127.0.0.1`.</span><span class="sxs-lookup"><span data-stu-id="d0a46-141">This means that you will need to make sure your application can accept LAN connections, i.e: You might need to bind your application to `0.0.0.0` instead of `127.0.0.1`.</span></span> <span data-ttu-id="d0a46-142">Par exemple, dans Python avec Flask, vous pouvez effectuer cette opération à l’aide de la commande : `app.run(host='0.0.0.0')`.</span><span class="sxs-lookup"><span data-stu-id="d0a46-142">For example in python using flask this can be done with the command: `app.run(host='0.0.0.0')`.</span></span> <span data-ttu-id="d0a46-143">Gardez à l’esprit la sécurité lorsque vous apportez ces changements, car cela permettra d’établir des connexions à partir de votre réseau local.</span><span class="sxs-lookup"><span data-stu-id="d0a46-143">Please keep security in mind when making these changes, as this will allow connections from your LAN.</span></span> 

#### <a name="accessing-a-wsl2-distro-from-your-local-area-network-lan"></a><span data-ttu-id="d0a46-144">Accès à une distribution WSL2 à partir de votre réseau local (LAN)</span><span class="sxs-lookup"><span data-stu-id="d0a46-144">Accessing a WSL2 distro from your local area network (LAN)</span></span>

<span data-ttu-id="d0a46-145">Lorsque vous utilisez une distribution WSL1, si votre ordinateur a été configuré pour être accessible dans votre réseau local, les applications qui s’exécutent dans WSL sont également accessibles sur votre réseau local.</span><span class="sxs-lookup"><span data-stu-id="d0a46-145">When using a WSL1 distro, if your computer was set up to be accessed by in your LAN, then applications run in WSL could be accessed on your LAN as well.</span></span> <span data-ttu-id="d0a46-146">Ce n’est pas le cas par défaut dans WSL2, car WSL2 a une carte Ethernet virtualisée avec sa propre adresse IP.</span><span class="sxs-lookup"><span data-stu-id="d0a46-146">This isn't the default case in WSL2, as WSL2 has a virtualized ethernet adapter with its own IP address.</span></span> <span data-ttu-id="d0a46-147">Actuellement, pour activer ce flux de travail, vous devez suivre les mêmes étapes que pour une machine virtuelle standard.</span><span class="sxs-lookup"><span data-stu-id="d0a46-147">Currently, to enable this workflow you will need to go through the same steps as you would for a regular virtual machine.</span></span> <span data-ttu-id="d0a46-148">Nous recherchons des moyens d’améliorer cette expérience.</span><span class="sxs-lookup"><span data-stu-id="d0a46-148">We are looking into ways to improve this experience!</span></span>

#### <a name="ipv6-access"></a><span data-ttu-id="d0a46-149">Accès IPv6</span><span class="sxs-lookup"><span data-stu-id="d0a46-149">IPv6 access</span></span>

<span data-ttu-id="d0a46-150">Les distributions WSL2 ne peuvent pas accéder actuellement aux adresses IPv6 uniquement.</span><span class="sxs-lookup"><span data-stu-id="d0a46-150">WSL2 distros currently cannot reach IPv6 only addresses.</span></span> <span data-ttu-id="d0a46-151">Nous travaillons à l’ajout de cette fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="d0a46-151">We are working on adding this feature.</span></span>

## <a name="understanding-wsl-2-uses-a-vhd-and-what-to-do-if-you-reach-its-max-size"></a><span data-ttu-id="d0a46-152">Comprendre que WSL 2 utilise un disque dur virtuel et ce qu’il faut faire si vous atteignez sa taille maximale</span><span class="sxs-lookup"><span data-stu-id="d0a46-152">Understanding WSL 2 uses a VHD, and what to do if you reach its max size</span></span>
<span data-ttu-id="d0a46-153">WSL 2 stocke tous vos fichiers Linux sur un disque dur virtuel qui utilise le système de fichiers ext4.</span><span class="sxs-lookup"><span data-stu-id="d0a46-153">WSL 2 stores all your Linux files inside of a VHD that uses the ext4 file system.</span></span> <span data-ttu-id="d0a46-154">Ce disque dur virtuel est redimensionné automatiquement pour satisfaire vos besoins de stockage.</span><span class="sxs-lookup"><span data-stu-id="d0a46-154">This VHD automatically resizes to meet your storage needs.</span></span> <span data-ttu-id="d0a46-155">Ce disque dur virtuel a également une taille maximale initiale de 256 Go.</span><span class="sxs-lookup"><span data-stu-id="d0a46-155">This VHD also has an initial max size of 256GB.</span></span> <span data-ttu-id="d0a46-156">Si la taille de votre distribution vient à dépasser 256 Go, vous verrez des erreurs indiquant que l’espace disque est insuffisant.</span><span class="sxs-lookup"><span data-stu-id="d0a46-156">If your distro grows in size to be greater than 256GB you will see errors stating that you've run out of disk space.</span></span> <span data-ttu-id="d0a46-157">Vous pouvez résoudre ce problème en développant la taille du disque dur virtuel.</span><span class="sxs-lookup"><span data-stu-id="d0a46-157">You can fix these by expanding the VHD size.</span></span> <span data-ttu-id="d0a46-158">Des instructions sur la façon de procéder sont fournies ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="d0a46-158">Instructions on how to do so are below:</span></span>

1. <span data-ttu-id="d0a46-159">Arrêtez toutes les instances WSL à l’aide de la commande `wsl --shutdown`.</span><span class="sxs-lookup"><span data-stu-id="d0a46-159">Terminate all WSL instances using the `wsl --shutdown` command</span></span>
2. <span data-ttu-id="d0a46-160">Recherchez le nom du package d’installation de votre distribution, « PackageFamilyName ».</span><span class="sxs-lookup"><span data-stu-id="d0a46-160">Find your distro installation package name 'PackageFamilyName'</span></span>
   - <span data-ttu-id="d0a46-161">Dans une invite PowerShell (où « distro » est le nom de votre distribution), tapez :</span><span class="sxs-lookup"><span data-stu-id="d0a46-161">In a powershell prompt (where 'distro' is your distribution name) type:</span></span>
      - `Get-AppxPackage -Name "*<distro>*" | Select PackageFamilyName`
3. <span data-ttu-id="d0a46-162">Localisez le chemin complet du fichier sur le disque dur virtuel, utilisé par votre installation WSL 2. Il s’agit de votre « pathToVHD » :</span><span class="sxs-lookup"><span data-stu-id="d0a46-162">Locate the VHD file fullpath used by your WSL 2 installation, this will be your 'pathToVHD':</span></span>
     - `%LOCALAPPDATA%\Packages\<PackageFamilyName>\LocalState\<disk>.vhdx`
4. <span data-ttu-id="d0a46-163">Redimensionnez votre disque dur virtuel WSL 2 en exécutant les commandes ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="d0a46-163">Resize your WSL 2 VHD by completing the following commands</span></span>
   - <span data-ttu-id="d0a46-164">Ouvrez une fenêtre d’invite de commandes avec les privilèges d’administrateur et exécutez les commandes suivantes :</span><span class="sxs-lookup"><span data-stu-id="d0a46-164">Open a command prompt Window with admin privileges and run the following commands:</span></span>
      - `diskpart`
      - `Select vdisk file="<pathToVHD>"`
      - `expand vdisk maximum="<sizeInMegaBytes>"`
5. <span data-ttu-id="d0a46-165">Lancez votre distribution WSL.</span><span class="sxs-lookup"><span data-stu-id="d0a46-165">Launch your WSL distro</span></span>
6. <span data-ttu-id="d0a46-166">Rendez WSL conscient qu’il peut étendre la taille de son système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="d0a46-166">Make WSL aware that it can expand its file system's size</span></span>
   - <span data-ttu-id="d0a46-167">Exécutez ces commandes dans votre distribution WSL :</span><span class="sxs-lookup"><span data-stu-id="d0a46-167">Run these commands in your WSL distro:</span></span>
      - `sudo mount -t devtmpfs none /dev`
      - `mount | grep ext4`
         - <span data-ttu-id="d0a46-168">Copiez le nom de cette entrée, qui ressemble à ceci : /dev/sdXX (X représentant tout autre caractère).</span><span class="sxs-lookup"><span data-stu-id="d0a46-168">Copy the name of this entry, which will look like: /dev/sdXX (with the X representing any other character)</span></span>
      - `sudo resize2fs /dev/sdXX`
         - <span data-ttu-id="d0a46-169">Veillez à utiliser la valeur que vous avez copiée précédemment et vous devrez peut-être utiliser : `apt install resize2fs`.</span><span class="sxs-lookup"><span data-stu-id="d0a46-169">Make sure to use the value you copied earlier, and you may need to use: `apt install resize2fs`.</span></span>

<span data-ttu-id="d0a46-170">Remarque : En général, vous ne devez pas modifier, déplacer ni accéder aux fichiers associés à WSL, situés dans votre dossier AppData, à l’aide d’outils ou d’éditeurs Windows.</span><span class="sxs-lookup"><span data-stu-id="d0a46-170">Please note: In general do not modify, move, or access the WSL related files located inside of your AppData folder using Windows tools or editors.</span></span> <span data-ttu-id="d0a46-171">Cela pourrait entraîner la corruption de votre distribution Linux.</span><span class="sxs-lookup"><span data-stu-id="d0a46-171">Doing so could cause your Linux distro to become corrupted.</span></span>

## <a name="wsl-2-will-use-some-memory-on-startup"></a><span data-ttu-id="d0a46-172">WSL 2 utilisera de la mémoire au démarrage</span><span class="sxs-lookup"><span data-stu-id="d0a46-172">WSL 2 will use some memory on startup</span></span>
<span data-ttu-id="d0a46-173">WSL 2 utilise une machine virtuelle utilitaire légère sur un véritable noyau Linux pour offrir de bonnes performances de système de fichiers et une compatibilité complète des appels système tout en restant aussi clair, rapide, intégré et réactif que WSL 1.</span><span class="sxs-lookup"><span data-stu-id="d0a46-173">WSL 2 uses a lightweight utility VM on a real Linux kernel to provide great file system performance and full system call compatibility while still being just as light, fast, integrated and responsive as WSL 1.</span></span> <span data-ttu-id="d0a46-174">Cette machine virtuelle utilitaire présente un faible encombrement mémoire et alloue de la mémoire stockée à l’adresse virtuelle au démarrage.</span><span class="sxs-lookup"><span data-stu-id="d0a46-174">This utility VM has a small memory footprint and will allocate Virtual Address backed memory on startup.</span></span> <span data-ttu-id="d0a46-175">Elle est configurée pour démarrer avec une petite proportion de votre mémoire totale.</span><span class="sxs-lookup"><span data-stu-id="d0a46-175">It is configured to start with a small proportion of your total memory.</span></span>

## <a name="cross-os-file-speed-will-be-slower-in-initial-preview-builds"></a><span data-ttu-id="d0a46-176">La vitesse des fichiers du système d’exploitation est plus lente dans les versions d’évaluation initiales</span><span class="sxs-lookup"><span data-stu-id="d0a46-176">Cross OS file speed will be slower in initial preview builds</span></span>
<span data-ttu-id="d0a46-177">Vous remarquez des vitesses de fichiers inférieures par rapport à WSL 1 lorsque vous accédez à des fichiers Windows à partir d’une application Linux, ou lorsque vous accédez à des fichiers Linux à partir d’une application Windows.</span><span class="sxs-lookup"><span data-stu-id="d0a46-177">You will notice slower file speeds compared to WSL 1 when accessing Windows files from a Linux application, or accessing Linux files from a Windows application.</span></span> <span data-ttu-id="d0a46-178">Cela résulte des changements architecturaux dans WSL 2 et fait l’objet d’une étude active de l’équipe WSL sur la façon d’améliorer cette expérience.</span><span class="sxs-lookup"><span data-stu-id="d0a46-178">This is a result of the architectural changes in WSL 2, and is something that the WSL team is actively investigating on how we can improve this experience.</span></span>
